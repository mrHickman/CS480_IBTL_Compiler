'''
Created on Feb 5, 2014

@author: mr_hickman
'''
from parseNode import ParseNode
from token import Token

class ParseTree:
    def __init__(self, rootNode):
        self.root = rootNode
        self.currentNode = rootNode
        self.currentChild = [-1]
        self.currentChildCount = [rootNode.getChildCount()]
        self.leftMost = ''

    def getNextLeftMostNode(self):
        if self.currentNode:
            while self.currentChildCount[-1] != 0 and self.currentChild[-1] + 1 < self.currentChildCount[-1] :
                self.currentChild[-1] += 1 
                self.currentNode = self.currentNode.getChild(self.currentChild[-1])
                self.currentChild.append(-1)
                self.currentChildCount.append(self.currentNode.getChildCount())
                
            self.leftMost = self.currentNode
            self.currentNode = self.currentNode.getParent()
            self.currentChild.pop()
            self.currentChildCount.pop()
            self.leftMost.getToken().depth = len(self.currentChild)
            return self.leftMost
        else:
            # Is finished
            return '' 
    def injectType(self, type):
        # TODO new node with type, replace parent with new node and child of parent (correct pos) with new node
        
        typeNode = ParseNode()
        if self.leftMost :
            self.leftMost.setParent()
        return
    
    def getRoot(self):
        return self.root